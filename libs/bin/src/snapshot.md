task: implement migration support via snapshotting.

```ts
const snapshot1 = await db._prepareSnapshot();

```
